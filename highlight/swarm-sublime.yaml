%YAML 1.2
---
name: swarm
scope: source.swarm
file_extensions: [ swarm ]

contexts:
  main:
    - match: '(random|randomVector|randomMatrix|log|logError|numberToString|boolToString|min|max|fileContents|range|tag|shell|sin)'
      captures:
        0: keyword.swarm
    - match: '(enumerate|with|while|if|as)'
      captures:
        0: keyword.swarm
    - match: '(number|bool|map|string|enumerable)'
      captures:
        0: keyword.swarm
    - match: '(\b[a-zA-Z_][a-zA-Z0-9_]*)'
      captures:
        0: keyword.swarm
    - include: numeric
    - match: '(\{)'
      captures:
        0: punctuation.swarm
      push: 
        - match: '(\})'
          pop: true
          captures:
            0: punctuation.swarm
        - include: main
        - match: '(.)'
          captures:
            0: text.swarm
    - match: '(;|,|<|>|=|\[|\]|\+|-|\*|\/|\!)'
      captures:
        0: punctuation.swarm
    - match: '(\")'
      captures:
        0: punctuation.swarm
      push: 
        - match: '(\")'
          pop: true
          captures:
            0: punctuation.swarm
        - match: '(.)'
          captures:
            0: text.swarm
    - match: '(\()'
      captures:
        0: punctuation.swarm
      push: 
        - match: '(\))'
          pop: true
          captures:
            0: punctuation.swarm
        - include: main
        - match: '(.)'
          captures:
            0: text.swarm
    - match: '(//.*)'
      captures:
        0: comment.swarm
    - match: '([^\s])'
      captures:
        0: invalid.swarm
    - match: '(.)'
      captures:
        0: text.swarm
  numeric:
    - match: '(\b\d+\.\d+)'
      captures:
        0: constant.numeric.swarm
    - match: '(\b\d+)'
      captures:
        0: constant.numeric.swarm
    - match: '(.)'
      captures:
        0: text.swarm

